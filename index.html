<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ma Collection Vinyles</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <header>
            <h1>Ma Collection Vinyles</h1>
            <div class="header-actions">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Rechercher artiste, album, label...">
                </div>
                <button id="addBtn" class="btn btn-primary">+ Ajouter</button>
                <label class="btn btn-secondary btn-import">
                    Importer CSV
                    <input type="file" id="csvInput" accept=".csv" hidden>
                </label>
                <button id="bulkCoverBtn" class="btn btn-secondary" title="Chercher automatiquement les pochettes manquantes">üîç Pochettes auto</button>
                <button id="exportBtn" class="btn btn-secondary" title="Exporter toutes les donn√©es (JSON)">üíæ JSON</button>
                <button id="exportCsvBtn" class="btn btn-secondary" title="Exporter en CSV">üíæ CSV</button>
                <label class="btn btn-secondary btn-import" title="Importer des donn√©es (JSON ou CSV)">
                    üìÇ Import
                    <input type="file" id="jsonImport" accept=".json" hidden>
                </label>
                <button id="bulkDeleteBtn" class="btn btn-danger hidden">Supprimer la s√©lection</button>
            </div>
            <div class="stats" id="stats"></div>
        </header>

        <div class="filters" id="filtersBar">
            <select id="filterCategorie">
                <option value="">Toutes cat√©gories</option>
            </select>
            <select id="filterGo√ªt">
                <option value="">Tous go√ªts</option>
            </select>
            <select id="filterEnergie">
                <option value="">Toutes √©nergies</option>
            </select>
            <select id="filterClass√©">
                <option value="">Class√© ?</option>
                <option value="Oui">Oui</option>
                <option value="Non">Non</option>
            </select>
            <select id="filterLabel">
                <option value="">Tous labels</option>
            </select>
            <select id="sortBy">
                <option value="artiste">Tri: Artiste</option>
                <option value="album">Tri: Album</option>
                <option value="ann√©e">Tri: Ann√©e</option>
                <option value="go√ªt">Tri: Go√ªt</option>
                <option value="audio">Tri: Audio</option>
                <option value="energie">Tri: √ânergie</option>
                <option value="prix">Tri: Prix</option>
                <option value="nb">Tri: Nb √©coutes</option>
                <option value="dateAjout">Tri: Date ajout</option>
            </select>
            <button id="sortDir" class="btn btn-small" title="Inverser le tri">‚Üë</button>
            <button id="resetFilters" class="btn btn-small hidden" title="R√©initialiser les filtres">‚úï Reset</button>
            <div class="view-toggle">
                <button id="viewTable" class="btn btn-small view-btn" title="Vue tableau">‚ò∞</button>
                <button id="viewGallery" class="btn btn-small view-btn active" title="Vue galerie">‚ñ¶</button>
            </div>
        </div>

        <div id="galleryView" class="gallery hidden"></div>

        <div class="table-wrapper" id="tableView">
            <table id="vinylTable" class="vinyl-table">
                <thead>
                    <tr>
                        <th class="col-center col-check"><input type="checkbox" id="selectAll" title="Tout s√©lectionner"></th>
                        <th>Cat√©gorie</th>
                        <th data-sort="class√©" class="col-center">Class√©</th>
                        <th data-sort="artiste">Artiste</th>
                        <th data-sort="album">Album</th>
                        <th data-sort="ann√©e" class="col-center">Ann√©e</th>
                        <th>Label</th>
                        <th>R√©f.</th>
                        <th data-sort="go√ªt">Go√ªt</th>
                        <th data-sort="audio">Audio</th>
                        <th data-sort="energie">√ânergie</th>
                        <th data-sort="nb" class="col-center">Nb</th>
                        <th data-sort="prix">Prix</th>
                        <th>Achet√©</th>
                        <th>Commentaire</th>
                    </tr>
                </thead>
                <tbody id="vinylBody"></tbody>
            </table>
        </div>

        <div id="emptyState" class="empty-state hidden">
            <p>Aucun vinyle. Commencez par en ajouter un !</p>
        </div>

        <!-- Modal ajout/√©dition -->
        <div id="modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Ajouter un vinyle</h2>
                    <button id="modalClose" class="btn-close">&times;</button>
                </div>
                <form id="vinylForm">
                    <div class="form-top-row">
                        <div class="cover-col">
                            <div class="cover-zone" id="coverZone" title="Cliquer pour ajouter/modifier l'URL de la pochette">
                                <img id="coverImg" src="" alt="" class="hidden">
                                <span id="coverPlaceholder" class="cover-placeholder">+ Photo</span>
                            </div>
                            <input type="text" id="coverUrl" class="cover-url-input hidden" placeholder="URL de la pochette">
                            <div class="cover-actions">
                                <button type="button" id="coverSearchBtn" class="btn btn-small btn-discogs" title="Chercher la pochette automatiquement">üîç Pochette</button>
                                <button type="button" id="coverUrlBtn" class="btn btn-small btn-discogs" title="Saisir une URL d'image manuellement">üîó URL</button>
                            </div>
                        </div>
                        <div class="form-top-fields">
                            <div class="form-group">
                                <label for="artiste">Artiste *</label>
                                <input type="text" id="artiste" name="artiste" required>
                            </div>
                            <div class="form-group">
                                <label for="album">Album *</label>
                                <input type="text" id="album" name="album" required>
                            </div>
                            <div class="form-group">
                                <label for="ann√©e">Ann√©e</label>
                                <input type="number" id="ann√©e" name="ann√©e" min="1900">
                            </div>
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>Cat√©gorie(s)</label>
                            <div class="checkbox-group" id="categorieGroup">
                                <label><input type="checkbox" name="categorie" value="Jazz"> Jazz</label>
                                <label><input type="checkbox" name="categorie" value="Jazz TBM"> Jazz TBM</label>
                                <label><input type="checkbox" name="categorie" value="Jazz Eighty Eight's"> Jazz Eighty Eight's</label>
                                <label><input type="checkbox" name="categorie" value="Pop / Rock"> Pop / Rock</label>
                                <label><input type="checkbox" name="categorie" value="Afrique"> Afrique</label>
                                <label><input type="checkbox" name="categorie" value="Br√©sil"> Br√©sil</label>
                                <label><input type="checkbox" name="categorie" value="Latin"> Latin</label>
                                <label><input type="checkbox" name="categorie" value="OST"> OST</label>
                                <label><input type="checkbox" name="categorie" value="Blues"> Blues</label>
                                <label><input type="checkbox" name="categorie" value="Electronique"> Electronique</label>
                                <label><input type="checkbox" name="categorie" value="Classique"> Classique</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="class√©">Class√©</label>
                            <select id="class√©" name="class√©">
                                <option value="Non">Non</option>
                                <option value="Oui">Oui</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="label">Label</label>
                            <input type="text" id="label" name="label">
                        </div>

                        <div class="form-group">
                            <label for="r√©f√©rence">R√©f√©rence</label>
                            <input type="text" id="r√©f√©rence" name="r√©f√©rence">
                        </div>

                        <div class="form-group">
                            <label for="go√ªt">Go√ªt</label>
                            <select id="go√ªt" name="go√ªt">
                                <option value="">‚Äî</option>
                                <option value="0">0 ‚Äì D√©teste ‚Äì Achat rat√©</option>
                                <option value="1">1 ‚Äì Tol√®re ‚Äì peu de plaisir</option>
                                <option value="2">2 ‚Äì Appr√©cie ‚Äì mais pas souvent</option>
                                <option value="3">3 ‚Äì Aime ‚Äì plaisir occasionnel</option>
                                <option value="4">4 ‚Äì Aime ‚Äì sympa r√©guli√®rement</option>
                                <option value="5">5 ‚Äì Adore ‚Äì vraiment excellent</option>
                                <option value="6">6 ‚Äì Vibre ‚Äì frissons, jamais lass√©</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="audio">Audio</label>
                            <select id="audio" name="audio">
                                <option value="">‚Äî</option>
                                <option value="3">3 ‚Äì Moyen, limit√©</option>
                                <option value="4">4 ‚Äì Correct</option>
                                <option value="5">5 ‚Äì Bon √©quilibre</option>
                                <option value="6">6 ‚Äì Tr√®s bon rendu</option>
                                <option value="7">7 ‚Äì Excellent d√©tail</option>
                                <option value="8">8 ‚Äì Superbe immersion</option>
                                <option value="9">9 ‚Äì Profond & d√©taill√©</option>
                                <option value="10">10 ‚Äì Exceptionnel</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="energie">√ânergie</label>
                            <select id="energie" name="energie">
                                <option value="">‚Äî</option>
                                <option value="1">1 ‚Äì Tr√®s doux / Introspectif</option>
                                <option value="2">2 ‚Äì Doux / Ambiance</option>
                                <option value="3">3 ‚Äì Mod√©r√© / Groovy</option>
                                <option value="4">4 ‚Äì √ânergique / Dansant</option>
                                <option value="5">5 ‚Äì Intense / Expressif</option>
                                <option value="6">6 ‚Äì Tr√®s √©nerv√© / Explosif</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="nb">Nb √©coutes</label>
                            <input type="number" id="nb" name="nb" min="0" value="0">
                        </div>

                        <div class="form-group">
                            <label for="prix">Prix (‚Ç¨)</label>
                            <input type="number" id="prix" name="prix" min="0" step="0.01">
                        </div>

                        <div class="form-group">
                            <label for="achet√©">Achet√©</label>
                            <input type="text" id="achet√©" name="achet√©" placeholder="Ex: Discogs, Fnac...">
                        </div>

                        <div class="form-group full-width">
                            <label for="commentaire">Commentaire</label>
                            <textarea id="commentaire" name="commentaire" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="deleteBtn" class="btn btn-danger hidden">Supprimer</button>
                        <div class="form-actions-right">
                            <button type="button" id="cancelBtn" class="btn btn-secondary">Annuler</button>
                            <button type="submit" class="btn btn-primary">Enregistrer</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- fin app -->
    </div>

    <script src="app.js"></script>
</body>
</html>
